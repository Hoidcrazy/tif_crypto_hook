# TIF文件透明加密系统

## 项目概述
本系统实现对TIF图像文件的透明加密保护，核心功能包括：
- 文件加密：对TIF文件执行逐字节异或操作（^0xFF）
- 实时解密：应用程序读取时自动解密
- 透明处理：无需修改现有应用程序
- 安全存储：硬盘中始终存储加密格式
适用于麒麟v10 SP1 2403及兼容Linux系统环境。

## 需求分析
- 加上企业文件头：const unsigned char FLAG[4096] = {
    0xFF, 0xF7, 0xF0, 0x7F, 0x77, 0x70, 0x0F, 0x07, 0x07, 0x0F, 0x70, 0x77, 0x7F, 0xF0, 0xF7, 0xFF,
    0xC4, 0xCF, 0xBE, 0xA9, 0xBC, 0xAA, 0xD3, 0xA1, 0xD0, 0xC5, 0xCF, 0xA2, 0xBF, 0xC6, 0xBC, 0xBC,
    0xD3, 0xD0, 0xCF, 0xDE, 0xB9, 0xAB, 0xCB, 0xBE, 0xBC, 0xD3, 0xC3, 0xDC, 0xCE, 0xC4, 0xBC, 0xFE
};
- 离线加密 `.tif` 文件，算法为每个字节 `^ 0xFF`
- 存储在磁盘上的是“加密后”的图像数据
- 在应用程序读取加密文件时（如调用 `read`、`fread`、`ReadFile`、`mmap` 等），拦截系统调用。
- 读取加密后的文件后，在 buffer 中“实时解密”，即再执行 `^ 0xFF` 还原原始数据，最后进行输出。
- 能区分授信进程
- 确认可以写入

## 系统要求
- 操作系统：麒麟v10 SP1 2403或兼容Linux发行版
- 硬件：x86_64或ARM64架构
- 依赖库：
    - glibc 2.28+
    - pthread
    - libdl

## .so 注入条件
在 麒麟 V10 SP1 Desktop（2403）系统中，可以使用 LD_PRELOAD 将自己编写的 .so 动态库 注入到图片查看器中，以实现透明解密（或 hook 文件读取函数），但 前提是**该图片查看器是使用 glibc 动态链接的 ELF 可执行文件**。